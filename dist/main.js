(()=>{"use strict";const e=function(e,t){let r=0,n=!1;return{hit:function(){return r+=1,r},getHits:function(){return r},isSunk:function(){return r==e&&(n=!0),n},length:e,shipName:t}},t=function(){let t=function(){let e=[],t=[],r=[],n=[],i=[];function o(e,t){return 10*e+t}function a(e,t,r,i){let a=o(e,t);if("Horizontal"==i)for(let e=0;e<r.length;e++)if(n.includes(a+e))return!1;if("Vertical"==i)for(let e=0;e<r.length;e++)if(n.includes(a+10*e))return!1;return!("Horizontal"==i&&t+r.length>10||"Vertical"==i&&e+r.length>10)}return{createBoard:function(){for(let t=0;t<10;t++)for(let r=0;r<10;r++){let n={coordinates:void 0,name:void 0};n.coordinates=[t,r],n.name=null,e.push(n)}return e},getBoard:function(){return e},checkValidity:a,placeShip:function(t,r,s,c){if("Horizontal"==c&&a(t,r,s,c)){let i=o(t,r);for(let t=0;t<s.length;t++)e[i+t].name=s.shipName,n.push(i+t),console.log(n)}if("Vertical"==c&&a(t,r,s,c)){let i=o(t,r);for(let t=0;t<s.length;t++)e[i+10*t].name=s.shipName,n.push(i+10*t),console.log(n)}i.push(s)},receiveAttack:function(n,a){let s=o(n,a);return null!=e[s].name?(r.push(s),function(e){for(let t=0;t<i.length;t++)if(i[t].shipName==e)return i[t]}(e[s].name).hit()):t.push(s),s},isAllSunk:function(){if(n.length==r.length)return!0},getMissedPositions:function(){return t},getAttackedPositions:function(){return r},getShipsPositions:function(){return n}}}(),r=[e(5,"Carrier"),e(4,"Battleship"),e(3,"Cruiser"),e(3,"Submarine"),e(2,"Destroyer")],n=[];return{randomAttack:function(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]},getBoard:function(){return t},getShips:function(){return r},getShotCoordinates:function(){return n},createBoard:t.createBoard,getBoard:t.getBoard,placeShip:t.placeShip,checkValidity:t.checkValidity,receiveAttack:t.receiveAttack,isAllSunk:t.isAllSunk,getMissedPositions:t.getMissedPositions,getAttackedPositions:t.getAttackedPositions,getShipsPositions:t.getShipsPositions}},r=function(){let e=t(),r=t();e.createBoard(),r.createBoard();let n=e.getBoard(),i=r.getBoard(),o=e.getShips(),a=r.getShips();return{gamer:e,computer:r,getGamerBoard:function(){return n},getComputerBoard:function(){return i},getGamerShips:function(){return o},getComputerShips:function(){return a}}}();(function(){document.querySelector(".carrier-name"),document.querySelector(".battleship-name"),document.querySelector(".cruiser-name"),document.querySelector(".submarine-name"),document.querySelector(".destroyer-name");const e=document.querySelector(".player-board"),t=document.querySelector(".computer-board"),n=document.querySelector(".direction");let i=r.getGamerBoard(),o=r.getComputerBoard(),a=[...r.getGamerShips()];function s(e){let t=e.classList[1].split(",");return[parseInt(t[0]),parseInt(t[1])]}return r.getComputerShips(),function(){let t,o,c=a[0];e.addEventListener("click",(l=>{if(l.target.classList.contains("player-board")){let u=l.target;if(t=s(u)[0],o=s(u)[1],a.length>0&&r.gamer.checkValidity(t,o,c,n.value)){r.gamer.placeShip(t,o,c,n.value),a.shift(),c=a[0];let s=r.gamer.getShipsPositions();for(let t=0;t<s.length;t++)e.children[s[t]].classList.add("ship");console.log(i)}}})),e.addEventListener("mouseover",(e=>{if(e.target.classList.contains("grid")){let i=e.target;t=s(i)[0],o=s(i)[1],a.length>0&&r.gamer.checkValidity(t,o,c,n.value)?i.classList.add("green"):a.length>0&&i.classList.add("red")}})),e.addEventListener("mouseout",(e=>{if(e.target.classList.contains("grid")){(t=e.target).classList.remove("green"),t.classList.remove("red")}var t}))}(),n.addEventListener("click",(()=>{"Horizontal"==n.value?(n.value="Vertical",n.textContent="Set Horizontal"):(n.value="Horizontal",n.textContent="Set Vertical")})),{hideDisplay:function(e){e.classList.remove("show"),e.classList.add("hide")},showDisplay:function(e){e.classList.remove("hide"),e.classList.add("show")},createGameBoards:function(){for(let t=0;t<i.length;t++){let r=document.createElement("div");r.classList.add(t),r.classList.add(i[t].coordinates),r.classList.add("grid"),r.classList.add("player-board"),e.appendChild(r)}for(let e=0;e<o.length;e++){let r=document.createElement("div");r.classList.add(e),r.classList.add(o[e].coordinates),r.classList.add("grid"),r.classList.add("computer-board"),t.appendChild(r)}}}})().createGameBoards()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L0MsT0FBUW9CLElBQUssQ0FDMUMsSUFBSStDLEVBQU9aLFNBQVMwQixjQUFjLE9BQ2xDZCxFQUFLTCxVQUFVVyxJQUFJckQsR0FDbkIrQyxFQUFLTCxVQUFVVyxJQUFJMUIsRUFBVzNCLEdBQUdLLGFBQ2pDMEMsRUFBS0wsVUFBVVcsSUFBSSxRQUNuQk4sRUFBS0wsVUFBVVcsSUFBSSxnQkFDbkJoQixFQUFleUIsWUFBWWYsRUFDN0IsQ0FDQSxJQUFLLElBQUkvQyxFQUFJLEVBQUdBLEVBQUk0QixFQUFjaEQsT0FBUW9CLElBQUssQ0FDN0MsSUFBSStDLEVBQU9aLFNBQVMwQixjQUFjLE9BQ2xDZCxFQUFLTCxVQUFVVyxJQUFJckQsR0FDbkIrQyxFQUFLTCxVQUFVVyxJQUFJekIsRUFBYzVCLEdBQUdLLGFBQ3BDMEMsRUFBS0wsVUFBVVcsSUFBSSxRQUNuQk4sRUFBS0wsVUFBVVcsSUFBSSxrQkFDbkJmLEVBQWlCd0IsWUFBWWYsRUFDL0IsQ0FDRixFQWtHRCxFQTVJVyxHQ0NSYSxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzaGlwID0gZnVuY3Rpb24gKGxlbmd0aCwgbmFtZSkge1xuICBsZXQgaGl0cyA9IDA7XG4gIGxldCBzdW5rID0gZmFsc2U7XG4gIGxldCBzaGlwTmFtZSA9IG5hbWU7XG5cbiAgZnVuY3Rpb24gaGl0KCkge1xuICAgIGhpdHMgKz0gMTtcbiAgICByZXR1cm4gaGl0cztcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzU3VuaygpIHtcbiAgICBpZiAoaGl0cyA9PSBsZW5ndGgpIHtcbiAgICAgIHN1bmsgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gc3VuaztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhpdHMoKSB7XG4gICAgcmV0dXJuIGhpdHM7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGhpdCxcbiAgICBnZXRIaXRzLFxuICAgIGlzU3VuayxcbiAgICBsZW5ndGgsXG4gICAgc2hpcE5hbWUsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzaGlwO1xuIiwiaW1wb3J0IHNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IGdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuY29uc3QgcGxheWVyID0gZnVuY3Rpb24gKCkge1xuICBsZXQgYm9hcmQgPSBnYW1lQm9hcmQoKTtcbiAgbGV0IGNhcnJpZXIgPSBzaGlwKDUsIFwiQ2FycmllclwiKTtcbiAgbGV0IGJhdHRsZXNoaXAgPSBzaGlwKDQsIFwiQmF0dGxlc2hpcFwiKTtcbiAgbGV0IGNydWlzZXIgPSBzaGlwKDMsIFwiQ3J1aXNlclwiKTtcbiAgbGV0IHN1Ym1hcmluZSA9IHNoaXAoMywgXCJTdWJtYXJpbmVcIik7XG4gIGxldCBkZXN0cm95ZXIgPSBzaGlwKDIsIFwiRGVzdHJveWVyXCIpO1xuICBsZXQgc2hpcHMgPSBbY2FycmllciwgYmF0dGxlc2hpcCwgY3J1aXNlciwgc3VibWFyaW5lLCBkZXN0cm95ZXJdO1xuICBsZXQgc2hvdENvb3JkaW5hdGVzID0gW107XG5cbiAgZnVuY3Rpb24gcmFuZG9tQXR0YWNrKCkge1xuICAgIGxldCB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuXG4gICAgcmV0dXJuIFt4LCB5XTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJvYXJkKCkge1xuICAgIHJldHVybiBib2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNoaXBzKCkge1xuICAgIHJldHVybiBzaGlwcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNob3RDb29yZGluYXRlcygpIHtcbiAgICByZXR1cm4gc2hvdENvb3JkaW5hdGVzO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByYW5kb21BdHRhY2ssXG4gICAgZ2V0Qm9hcmQsXG4gICAgZ2V0U2hpcHMsXG4gICAgZ2V0U2hvdENvb3JkaW5hdGVzLFxuICAgIGNyZWF0ZUJvYXJkOiBib2FyZC5jcmVhdGVCb2FyZCxcbiAgICBnZXRCb2FyZDogYm9hcmQuZ2V0Qm9hcmQsXG4gICAgcGxhY2VTaGlwOiBib2FyZC5wbGFjZVNoaXAsXG4gICAgY2hlY2tWYWxpZGl0eTogYm9hcmQuY2hlY2tWYWxpZGl0eSxcbiAgICByZWNlaXZlQXR0YWNrOiBib2FyZC5yZWNlaXZlQXR0YWNrLFxuICAgIGlzQWxsU3VuazogYm9hcmQuaXNBbGxTdW5rLFxuICAgIGdldE1pc3NlZFBvc2l0aW9uczogYm9hcmQuZ2V0TWlzc2VkUG9zaXRpb25zLFxuICAgIGdldEF0dGFja2VkUG9zaXRpb25zOiBib2FyZC5nZXRBdHRhY2tlZFBvc2l0aW9ucyxcbiAgICBnZXRTaGlwc1Bvc2l0aW9uczogYm9hcmQuZ2V0U2hpcHNQb3NpdGlvbnMsXG4gIH07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBwbGF5ZXI7XG4iLCJpbXBvcnQgc2hpcCBmcm9tIFwiLi9zaGlwXCI7XG5jb25zdCBnYW1lQm9hcmQgPSBmdW5jdGlvbiAoKSB7XG4gIGxldCBib2FyZCA9IFtdO1xuICBsZXQgbWlzc2VkQXR0YWNrID0gW107XG4gIGxldCBhdHRhY2tlZFBvc2l0aW9uID0gW107XG4gIGxldCBzaGlwUG9zaXRpb24gPSBbXTtcbiAgbGV0IHNoaXBzID0gW107XG5cbiAgZnVuY3Rpb24gY3JlYXRlQ29vcmRpbmF0ZShjb29yZGluYXRlcywgbmFtZSkge1xuICAgIHJldHVybiB7IGNvb3JkaW5hdGVzLCBuYW1lIH07XG4gIH1cblxuICBmdW5jdGlvbiBpbmRleEZpbmRlcihwb3MxLCBwb3MyKSB7XG4gICAgbGV0IGluZGV4ID0gcG9zMSAqIDEwICsgcG9zMjtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVCb2FyZCgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTA7IGorKykge1xuICAgICAgICBsZXQgbmV3Q29vcmRpbmF0ZXMgPSBjcmVhdGVDb29yZGluYXRlKCk7XG4gICAgICAgIG5ld0Nvb3JkaW5hdGVzLmNvb3JkaW5hdGVzID0gW2ksIGpdO1xuICAgICAgICBuZXdDb29yZGluYXRlcy5uYW1lID0gbnVsbDtcbiAgICAgICAgYm9hcmQucHVzaChuZXdDb29yZGluYXRlcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBib2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrVmFsaWRpdHkocG9zMSwgcG9zMiwgc2hpcCwgZGlyZWN0aW9uKSB7XG4gICAgbGV0IGluZGV4ID0gaW5kZXhGaW5kZXIocG9zMSwgcG9zMik7XG5cbiAgICBpZiAoZGlyZWN0aW9uID09IFwiSG9yaXpvbnRhbFwiKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHNoaXBQb3NpdGlvbi5pbmNsdWRlcyhpbmRleCArIGkpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRpcmVjdGlvbiA9PSBcIlZlcnRpY2FsXCIpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2hpcFBvc2l0aW9uLmluY2x1ZGVzKGluZGV4ICsgaSAqIDEwKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkaXJlY3Rpb24gPT0gXCJIb3Jpem9udGFsXCIgJiYgcG9zMiArIHNoaXAubGVuZ3RoID4gMTApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoZGlyZWN0aW9uID09IFwiVmVydGljYWxcIiAmJiBwb3MxICsgc2hpcC5sZW5ndGggPiAxMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYWNlU2hpcChwb3MxLCBwb3MyLCBzaGlwLCBkaXJlY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICBkaXJlY3Rpb24gPT0gXCJIb3Jpem9udGFsXCIgJiZcbiAgICAgIGNoZWNrVmFsaWRpdHkocG9zMSwgcG9zMiwgc2hpcCwgZGlyZWN0aW9uKVxuICAgICkge1xuICAgICAgbGV0IGluZGV4ID0gaW5kZXhGaW5kZXIocG9zMSwgcG9zMik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2FyZFtpbmRleCArIGldLm5hbWUgPSBzaGlwLnNoaXBOYW1lO1xuICAgICAgICBzaGlwUG9zaXRpb24ucHVzaChpbmRleCArIGkpO1xuICAgICAgICBjb25zb2xlLmxvZyhzaGlwUG9zaXRpb24pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkaXJlY3Rpb24gPT0gXCJWZXJ0aWNhbFwiICYmIGNoZWNrVmFsaWRpdHkocG9zMSwgcG9zMiwgc2hpcCwgZGlyZWN0aW9uKSkge1xuICAgICAgbGV0IGluZGV4ID0gaW5kZXhGaW5kZXIocG9zMSwgcG9zMik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2FyZFtpbmRleCArIGkgKiAxMF0ubmFtZSA9IHNoaXAuc2hpcE5hbWU7XG4gICAgICAgIHNoaXBQb3NpdGlvbi5wdXNoKGluZGV4ICsgaSAqIDEwKTtcbiAgICAgICAgY29uc29sZS5sb2coc2hpcFBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2hpcHMucHVzaChzaGlwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2socG9zMSwgcG9zMikge1xuICAgIGxldCBpbmRleCA9IGluZGV4RmluZGVyKHBvczEsIHBvczIpO1xuXG4gICAgaWYgKGJvYXJkW2luZGV4XS5uYW1lICE9IG51bGwpIHtcbiAgICAgIGF0dGFja2VkUG9zaXRpb24ucHVzaChpbmRleCk7XG4gICAgICBmaW5kU2hpcChib2FyZFtpbmRleF0ubmFtZSkuaGl0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pc3NlZEF0dGFjay5wdXNoKGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZFNoaXAobmFtZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzaGlwc1tpXS5zaGlwTmFtZSA9PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiBzaGlwc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0FsbFN1bmsoKSB7XG4gICAgaWYgKHNoaXBQb3NpdGlvbi5sZW5ndGggPT0gYXR0YWNrZWRQb3NpdGlvbi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJvYXJkKCkge1xuICAgIHJldHVybiBib2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1pc3NlZFBvc2l0aW9ucygpIHtcbiAgICByZXR1cm4gbWlzc2VkQXR0YWNrO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2hpcHNQb3NpdGlvbnMoKSB7XG4gICAgcmV0dXJuIHNoaXBQb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0dGFja2VkUG9zaXRpb25zKCkge1xuICAgIHJldHVybiBhdHRhY2tlZFBvc2l0aW9uO1xuICB9XG4gIHJldHVybiB7XG4gICAgY3JlYXRlQm9hcmQsXG4gICAgZ2V0Qm9hcmQsXG4gICAgY2hlY2tWYWxpZGl0eSxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBpc0FsbFN1bmssXG4gICAgZ2V0TWlzc2VkUG9zaXRpb25zLFxuICAgIGdldEF0dGFja2VkUG9zaXRpb25zLFxuICAgIGdldFNoaXBzUG9zaXRpb25zLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2FtZUJvYXJkO1xuIiwiaW1wb3J0IHNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IGdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCBwbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5cbmNvbnN0IGdhbWUgPSAoZnVuY3Rpb24gKCkge1xuICBsZXQgZ2FtZXIgPSBwbGF5ZXIoKTtcbiAgbGV0IGNvbXB1dGVyID0gcGxheWVyKCk7XG5cbiAgZ2FtZXIuY3JlYXRlQm9hcmQoKTtcbiAgY29tcHV0ZXIuY3JlYXRlQm9hcmQoKTtcblxuICBsZXQgZ2FtZXJCb2FyZCA9IGdhbWVyLmdldEJvYXJkKCk7XG4gIGxldCBjb21wdXRlckJvYXJkID0gY29tcHV0ZXIuZ2V0Qm9hcmQoKTtcbiAgbGV0IGdhbWVyU2hpcHMgPSBnYW1lci5nZXRTaGlwcygpO1xuICBsZXQgY29tcHV0ZXJTaGlwcyA9IGNvbXB1dGVyLmdldFNoaXBzKCk7XG5cbiAgZnVuY3Rpb24gZ2V0R2FtZXJCb2FyZCgpIHtcbiAgICByZXR1cm4gZ2FtZXJCb2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbXB1dGVyQm9hcmQoKSB7XG4gICAgcmV0dXJuIGNvbXB1dGVyQm9hcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHYW1lclNoaXBzKCkge1xuICAgIHJldHVybiBnYW1lclNoaXBzO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29tcHV0ZXJTaGlwcygpIHtcbiAgICByZXR1cm4gY29tcHV0ZXJTaGlwcztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2FtZXIsXG4gICAgY29tcHV0ZXIsXG4gICAgZ2V0R2FtZXJCb2FyZCxcbiAgICBnZXRDb21wdXRlckJvYXJkLFxuICAgIGdldEdhbWVyU2hpcHMsXG4gICAgZ2V0Q29tcHV0ZXJTaGlwcyxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWU7XG4iLCJpbXBvcnQgc2hpcCBmcm9tIFwiLi9zaGlwXCI7XG5pbXBvcnQgZ2FtZUJvYXJkIGZyb20gXCIuL2dhbWVib2FyZFwiO1xuaW1wb3J0IHBsYXllciBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCBnYW1lIGZyb20gXCIuL2dhbWVcIjtcblxuY29uc3QgZG9tID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgY2FycmllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2Fycmllci1uYW1lXCIpO1xuICBjb25zdCBiYXR0bGVzaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5iYXR0bGVzaGlwLW5hbWVcIik7XG4gIGNvbnN0IGNydWlzZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNydWlzZXItbmFtZVwiKTtcbiAgY29uc3Qgc3VibWFyaW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdWJtYXJpbmUtbmFtZVwiKTtcbiAgY29uc3QgZGVzdHJveWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXN0cm95ZXItbmFtZVwiKTtcbiAgY29uc3QgcGxheWVyQm9hcmREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXllci1ib2FyZFwiKTtcbiAgY29uc3QgY29tcHV0ZXJCb2FyZERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29tcHV0ZXItYm9hcmRcIik7XG4gIGNvbnN0IGRpcmVjdGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlyZWN0aW9uXCIpO1xuXG4gIGxldCBnYW1lckJvYXJkID0gZ2FtZS5nZXRHYW1lckJvYXJkKCk7XG4gIGxldCBjb21wdXRlckJvYXJkID0gZ2FtZS5nZXRDb21wdXRlckJvYXJkKCk7XG4gIGxldCBnYW1lclNoaXBzID0gWy4uLmdhbWUuZ2V0R2FtZXJTaGlwcygpXTtcbiAgbGV0IGNvbXB1dGVyU2hpcHMgPSBbLi4uZ2FtZS5nZXRDb21wdXRlclNoaXBzKCldO1xuXG4gIGZ1bmN0aW9uIGhpZGVEaXNwbGF5KGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RGlzcGxheShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlR2FtZUJvYXJkcygpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVyQm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBncmlkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGdyaWQuY2xhc3NMaXN0LmFkZChpKTtcbiAgICAgIGdyaWQuY2xhc3NMaXN0LmFkZChnYW1lckJvYXJkW2ldLmNvb3JkaW5hdGVzKTtcbiAgICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImdyaWRcIik7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJwbGF5ZXItYm9hcmRcIik7XG4gICAgICBwbGF5ZXJCb2FyZERpdi5hcHBlbmRDaGlsZChncmlkKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wdXRlckJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoaSk7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoY29tcHV0ZXJCb2FyZFtpXS5jb29yZGluYXRlcyk7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJncmlkXCIpO1xuICAgICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwiY29tcHV0ZXItYm9hcmRcIik7XG4gICAgICBjb21wdXRlckJvYXJkRGl2LmFwcGVuZENoaWxkKGdyaWQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzKHRhcmdldCkge1xuICAgIGxldCBjb29yZGluYXRlcyA9IHRhcmdldC5jbGFzc0xpc3RbMV0uc3BsaXQoXCIsXCIpO1xuICAgIGxldCBwb3MxID0gcGFyc2VJbnQoY29vcmRpbmF0ZXNbMF0pO1xuICAgIGxldCBwb3MyID0gcGFyc2VJbnQoY29vcmRpbmF0ZXNbMV0pO1xuXG4gICAgcmV0dXJuIFtwb3MxLCBwb3MyXTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFZhbGlkaXR5Q29sb3IoY2VsbCkge1xuICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImdyZWVuXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlVmFsaWRpdHlDb2xvcihjZWxsKSB7XG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiZ3JlZW5cIik7XG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwicmVkXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTm9uVmFsaWRpdHlDb2xvcihjZWxsKSB7XG4gICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwicmVkXCIpO1xuICB9XG5cbiAgKGZ1bmN0aW9uIHBsYXllckJvYXJkRXZlbnRzKCkge1xuICAgIGxldCBjdXJyZW50U2hpcCA9IGdhbWVyU2hpcHNbMF07XG4gICAgbGV0IHBvczE7XG4gICAgbGV0IHBvczI7XG5cbiAgICBwbGF5ZXJCb2FyZERpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGdyaWQpID0+IHtcbiAgICAgIGlmIChncmlkLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwbGF5ZXItYm9hcmRcIikpIHtcbiAgICAgICAgbGV0IHRhcmdldCA9IGdyaWQudGFyZ2V0O1xuICAgICAgICBwb3MxID0gZ2V0Q29vcmRpbmF0ZXModGFyZ2V0KVswXTtcbiAgICAgICAgcG9zMiA9IGdldENvb3JkaW5hdGVzKHRhcmdldClbMV07XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lclNoaXBzLmxlbmd0aCA+IDAgJiZcbiAgICAgICAgICBnYW1lLmdhbWVyLmNoZWNrVmFsaWRpdHkoXG4gICAgICAgICAgICBwb3MxLFxuICAgICAgICAgICAgcG9zMixcbiAgICAgICAgICAgIGN1cnJlbnRTaGlwLFxuICAgICAgICAgICAgZGlyZWN0aW9uQnV0dG9uLnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBnYW1lLmdhbWVyLnBsYWNlU2hpcChwb3MxLCBwb3MyLCBjdXJyZW50U2hpcCwgZGlyZWN0aW9uQnV0dG9uLnZhbHVlKTtcbiAgICAgICAgICBnYW1lclNoaXBzLnNoaWZ0KCk7XG4gICAgICAgICAgY3VycmVudFNoaXAgPSBnYW1lclNoaXBzWzBdO1xuICAgICAgICAgIGxldCBzaGlwUG9zaXRpb25zID0gZ2FtZS5nYW1lci5nZXRTaGlwc1Bvc2l0aW9ucygpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcFBvc2l0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcGxheWVyQm9hcmREaXYuY2hpbGRyZW5bc2hpcFBvc2l0aW9uc1tpXV0uY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUubG9nKGdhbWVyQm9hcmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBwbGF5ZXJCb2FyZERpdi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIChncmlkKSA9PiB7XG4gICAgICBpZiAoZ3JpZC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ3JpZFwiKSkge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZ3JpZC50YXJnZXQ7XG4gICAgICAgIHBvczEgPSBnZXRDb29yZGluYXRlcyh0YXJnZXQpWzBdO1xuICAgICAgICBwb3MyID0gZ2V0Q29vcmRpbmF0ZXModGFyZ2V0KVsxXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWVyU2hpcHMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgIGdhbWUuZ2FtZXIuY2hlY2tWYWxpZGl0eShcbiAgICAgICAgICAgIHBvczEsXG4gICAgICAgICAgICBwb3MyLFxuICAgICAgICAgICAgY3VycmVudFNoaXAsXG4gICAgICAgICAgICBkaXJlY3Rpb25CdXR0b24udmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIGFkZFZhbGlkaXR5Q29sb3IodGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIGlmIChnYW1lclNoaXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBhZGROb25WYWxpZGl0eUNvbG9yKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsYXllckJvYXJkRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoZ3JpZCkgPT4ge1xuICAgICAgaWYgKGdyaWQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImdyaWRcIikpIHtcbiAgICAgICAgbGV0IHRhcmdldCA9IGdyaWQudGFyZ2V0O1xuICAgICAgICByZW1vdmVWYWxpZGl0eUNvbG9yKHRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pKCk7XG5cbiAgZGlyZWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKGRpcmVjdGlvbkJ1dHRvbi52YWx1ZSA9PSBcIkhvcml6b250YWxcIikge1xuICAgICAgZGlyZWN0aW9uQnV0dG9uLnZhbHVlID0gXCJWZXJ0aWNhbFwiO1xuICAgICAgZGlyZWN0aW9uQnV0dG9uLnRleHRDb250ZW50ID0gXCJTZXQgSG9yaXpvbnRhbFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJlY3Rpb25CdXR0b24udmFsdWUgPSBcIkhvcml6b250YWxcIjtcbiAgICAgIGRpcmVjdGlvbkJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2V0IFZlcnRpY2FsXCI7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGhpZGVEaXNwbGF5LFxuICAgIHNob3dEaXNwbGF5LFxuICAgIGNyZWF0ZUdhbWVCb2FyZHMsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBkb207XG4iLCJpbXBvcnQgZG9tIGZyb20gXCIuL2RvbVwiO1xuaW1wb3J0IHNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IGdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCBwbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgZ2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5cbmRvbS5jcmVhdGVHYW1lQm9hcmRzKCk7XG4iXSwibmFtZXMiOlsibGVuZ3RoIiwibmFtZSIsImhpdHMiLCJzdW5rIiwiaGl0IiwiZ2V0SGl0cyIsImlzU3VuayIsInNoaXBOYW1lIiwiYm9hcmQiLCJtaXNzZWRBdHRhY2siLCJhdHRhY2tlZFBvc2l0aW9uIiwic2hpcFBvc2l0aW9uIiwic2hpcHMiLCJpbmRleEZpbmRlciIsInBvczEiLCJwb3MyIiwiY2hlY2tWYWxpZGl0eSIsInNoaXAiLCJkaXJlY3Rpb24iLCJpbmRleCIsImkiLCJpbmNsdWRlcyIsImNyZWF0ZUJvYXJkIiwiaiIsIm5ld0Nvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZXMiLCJjcmVhdGVDb29yZGluYXRlIiwicHVzaCIsImdldEJvYXJkIiwicGxhY2VTaGlwIiwiY29uc29sZSIsImxvZyIsInJlY2VpdmVBdHRhY2siLCJmaW5kU2hpcCIsImlzQWxsU3VuayIsImdldE1pc3NlZFBvc2l0aW9ucyIsImdldEF0dGFja2VkUG9zaXRpb25zIiwiZ2V0U2hpcHNQb3NpdGlvbnMiLCJzaG90Q29vcmRpbmF0ZXMiLCJyYW5kb21BdHRhY2siLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRTaGlwcyIsImdldFNob3RDb29yZGluYXRlcyIsImdhbWVyIiwiY29tcHV0ZXIiLCJnYW1lckJvYXJkIiwiY29tcHV0ZXJCb2FyZCIsImdhbWVyU2hpcHMiLCJjb21wdXRlclNoaXBzIiwiZ2V0R2FtZXJCb2FyZCIsImdldENvbXB1dGVyQm9hcmQiLCJnZXRHYW1lclNoaXBzIiwiZ2V0Q29tcHV0ZXJTaGlwcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInBsYXllckJvYXJkRGl2IiwiY29tcHV0ZXJCb2FyZERpdiIsImRpcmVjdGlvbkJ1dHRvbiIsImdldENvb3JkaW5hdGVzIiwidGFyZ2V0IiwiY2xhc3NMaXN0Iiwic3BsaXQiLCJwYXJzZUludCIsImN1cnJlbnRTaGlwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdyaWQiLCJjb250YWlucyIsInZhbHVlIiwic2hpZnQiLCJzaGlwUG9zaXRpb25zIiwiY2hpbGRyZW4iLCJhZGQiLCJjZWxsIiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJoaWRlRGlzcGxheSIsImVsZW1lbnQiLCJzaG93RGlzcGxheSIsImNyZWF0ZUdhbWVCb2FyZHMiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiXSwic291cmNlUm9vdCI6IiJ9