(()=>{"use strict";const e=function(e,t){let r=0,n=!1;return{hit:function(){return r+=1,r},getHits:function(){return r},isSunk:function(){return r==e&&(n=!0),n},length:e,shipName:t}},t=function(){let t=function(){let e=[],t=[],r=[],n=[],o=[];function i(e,t){return 10*e+t}return{createBoard:function(){for(let t=0;t<10;t++)for(let r=0;r<10;r++){let n={coordinates:void 0,name:void 0};n.coordinates=[t,r],n.name=null,e.push(n)}return e},getBoard:function(){return e},placeShip:function(t,r,a,s){if("Horizontal"==s){if(r+a.length>10)return!1;let o=i(t,r);for(let t=0;t<a.length;t++)e[o+t].name=a.shipName,n.push(o+t)}if("Vertical"==s){if(t+a.length>10)return!1;let o=i(t,r);for(let t=0;t<a.length;t++)e[o+10*t].name=a.shipName,n.push(o+10*t)}o.push(a)},receiveAttack:function(n,a){let s=i(n,a);return null!=e[s].name?(r.push(s),function(e){for(let t=0;t<o.length;t++)if(o[t].shipName==e)return o[t]}(e[s].name).hit()):t.push(s),s},isAllSunk:function(){if(n.length==r.length)return!0},getMissedPositions:function(){return t},getAttackedPositions:function(){return r},getShipsPositions:function(){return n}}}(),r=[e(5,"Carrier"),e(4,"Battleship"),e(3,"Cruiser"),e(3,"Submarine"),e(2,"Destroyer")],n=[];return{randomAttack:function(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]},getBoard:function(){return t},getShips:function(){return r},getShotCoordinates:function(){return n},createBoard:t.createBoard,getBoard:t.getBoard,placeShip:t.placeShip,receiveAttack:t.receiveAttack,isAllSunk:t.isAllSunk,getMissedPositions:t.getMissedPositions,getAttackedPositions:t.getAttackedPositions,getShipsPositions:t.getShipsPositions}},r=function(){let e=t(),r=t();e.createBoard(),r.createBoard();let n=e.getBoard(),o=r.getBoard(),i=e.getShips(),a=r.getShips();return{gamer:e,computer:r,getGamerBoard:function(){return n},getComputerBoard:function(){return o},getGamerShips:function(){return i},getComputerShips:function(){return a}}}();(function(){document.querySelector(".carrier-name"),document.querySelector(".battleship-name"),document.querySelector(".cruiser-name"),document.querySelector(".submarine-name"),document.querySelector(".destroyer-name");const e=document.querySelector(".player-board"),t=document.querySelector(".computer-board"),n=document.querySelector(".direction");let o=r.getGamerBoard(),i=r.getComputerBoard(),a=[...r.getGamerShips()];return r.getComputerShips(),e.addEventListener("click",(e=>{if(e.target.classList.contains("player-board")){let t=e.target.classList[1].split(","),i=parseInt(t[0]),s=parseInt(t[1]);if(a.length>0){let e=a[0];0!=r.gamer.placeShip(i,s,e,n.value)&&(console.log(o),a.shift(),console.log(r.getGamerShips()))}}})),n.addEventListener("click",(()=>{"Horizontal"==n.value?(n.value="Vertical",n.textContent="Set Horizontal"):(n.value="Horizontal",n.textContent="Set Vertical")})),{hideDisplay:function(e){e.classList.remove("show"),e.classList.add("hide")},showDisplay:function(e){e.classList.remove("hide"),e.classList.add("show")},createGameBoards:function(){for(let t=0;t<o.length;t++){let r=document.createElement("div");r.classList.add(t),r.classList.add(o[t].coordinates),r.classList.add("grid"),r.classList.add("player-board"),e.appendChild(r)}for(let e=0;e<i.length;e++){let r=document.createElement("div");r.classList.add(e),r.classList.add(i[e].coordinates),r.classList.add("grid"),r.classList.add("computer-board"),t.appendChild(r)}}}})().createGameBoards()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFNBQVN3QixjQUFjLE9BQ2xDbEIsRUFBS0UsVUFBVWEsSUFBSXZELEdBQ25Cd0MsRUFBS0UsVUFBVWEsSUFBSTVCLEVBQWMzQixHQUFHRyxhQUNwQ3FDLEVBQUtFLFVBQVVhLElBQUksUUFDbkJmLEVBQUtFLFVBQVVhLElBQUksa0JBQ25CbEIsRUFBaUJzQixZQUFZbkIsRUFDL0IsQ0FDRixFQXdDRCxFQWxGVyxHQ0NSaUIsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9wbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9nYW1lLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2hpcCA9IGZ1bmN0aW9uIChsZW5ndGgsIG5hbWUpIHtcbiAgbGV0IGhpdHMgPSAwO1xuICBsZXQgc3VuayA9IGZhbHNlO1xuICBsZXQgc2hpcE5hbWUgPSBuYW1lO1xuXG4gIGZ1bmN0aW9uIGhpdCgpIHtcbiAgICBoaXRzICs9IDE7XG4gICAgcmV0dXJuIGhpdHM7XG4gIH1cblxuICBmdW5jdGlvbiBpc1N1bmsoKSB7XG4gICAgaWYgKGhpdHMgPT0gbGVuZ3RoKSB7XG4gICAgICBzdW5rID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1bms7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRIaXRzKCkge1xuICAgIHJldHVybiBoaXRzO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoaXQsXG4gICAgZ2V0SGl0cyxcbiAgICBpc1N1bmssXG4gICAgbGVuZ3RoLFxuICAgIHNoaXBOYW1lLFxuICB9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgc2hpcDtcbiIsImltcG9ydCBzaGlwIGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCBnYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5cbmNvbnN0IHBsYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGJvYXJkID0gZ2FtZUJvYXJkKCk7XG4gIGxldCBjYXJyaWVyID0gc2hpcCg1LCBcIkNhcnJpZXJcIik7XG4gIGxldCBiYXR0bGVzaGlwID0gc2hpcCg0LCBcIkJhdHRsZXNoaXBcIik7XG4gIGxldCBjcnVpc2VyID0gc2hpcCgzLCBcIkNydWlzZXJcIik7XG4gIGxldCBzdWJtYXJpbmUgPSBzaGlwKDMsIFwiU3VibWFyaW5lXCIpO1xuICBsZXQgZGVzdHJveWVyID0gc2hpcCgyLCBcIkRlc3Ryb3llclwiKTtcbiAgbGV0IHNoaXBzID0gW2NhcnJpZXIsIGJhdHRsZXNoaXAsIGNydWlzZXIsIHN1Ym1hcmluZSwgZGVzdHJveWVyXTtcbiAgbGV0IHNob3RDb29yZGluYXRlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIHJhbmRvbUF0dGFjaygpIHtcbiAgICBsZXQgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBsZXQgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcblxuICAgIHJldHVybiBbeCwgeV07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRCb2FyZCgpIHtcbiAgICByZXR1cm4gYm9hcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTaGlwcygpIHtcbiAgICByZXR1cm4gc2hpcHM7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTaG90Q29vcmRpbmF0ZXMoKSB7XG4gICAgcmV0dXJuIHNob3RDb29yZGluYXRlcztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmFuZG9tQXR0YWNrLFxuICAgIGdldEJvYXJkLFxuICAgIGdldFNoaXBzLFxuICAgIGdldFNob3RDb29yZGluYXRlcyxcbiAgICBjcmVhdGVCb2FyZDogYm9hcmQuY3JlYXRlQm9hcmQsXG4gICAgZ2V0Qm9hcmQ6IGJvYXJkLmdldEJvYXJkLFxuICAgIHBsYWNlU2hpcDogYm9hcmQucGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2s6IGJvYXJkLnJlY2VpdmVBdHRhY2ssXG4gICAgaXNBbGxTdW5rOiBib2FyZC5pc0FsbFN1bmssXG4gICAgZ2V0TWlzc2VkUG9zaXRpb25zOiBib2FyZC5nZXRNaXNzZWRQb3NpdGlvbnMsXG4gICAgZ2V0QXR0YWNrZWRQb3NpdGlvbnM6IGJvYXJkLmdldEF0dGFja2VkUG9zaXRpb25zLFxuICAgIGdldFNoaXBzUG9zaXRpb25zOiBib2FyZC5nZXRTaGlwc1Bvc2l0aW9ucyxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXllcjtcbiIsImltcG9ydCBzaGlwIGZyb20gXCIuL3NoaXBcIjtcbmNvbnN0IGdhbWVCb2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IGJvYXJkID0gW107XG4gIGxldCBtaXNzZWRBdHRhY2sgPSBbXTtcbiAgbGV0IGF0dGFja2VkUG9zaXRpb24gPSBbXTtcbiAgbGV0IHNoaXBQb3NpdGlvbiA9IFtdO1xuICBsZXQgc2hpcHMgPSBbXTtcblxuICBmdW5jdGlvbiBjcmVhdGVDb29yZGluYXRlKGNvb3JkaW5hdGVzLCBuYW1lKSB7XG4gICAgcmV0dXJuIHsgY29vcmRpbmF0ZXMsIG5hbWUgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluZGV4RmluZGVyKHBvczEsIHBvczIpIHtcbiAgICBsZXQgaW5kZXggPSBwb3MxICogMTAgKyBwb3MyO1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUJvYXJkKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAxMDsgaisrKSB7XG4gICAgICAgIGxldCBuZXdDb29yZGluYXRlcyA9IGNyZWF0ZUNvb3JkaW5hdGUoKTtcbiAgICAgICAgbmV3Q29vcmRpbmF0ZXMuY29vcmRpbmF0ZXMgPSBbaSwgal07XG4gICAgICAgIG5ld0Nvb3JkaW5hdGVzLm5hbWUgPSBudWxsO1xuICAgICAgICBib2FyZC5wdXNoKG5ld0Nvb3JkaW5hdGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGJvYXJkO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxhY2VTaGlwKHBvczEsIHBvczIsIHNoaXAsIGRpcmVjdGlvbikge1xuICAgIGlmIChkaXJlY3Rpb24gPT0gXCJIb3Jpem9udGFsXCIpIHtcbiAgICAgIGlmIChwb3MyICsgc2hpcC5sZW5ndGggPiAxMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBpbmRleCA9IGluZGV4RmluZGVyKHBvczEsIHBvczIpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYm9hcmRbaW5kZXggKyBpXS5uYW1lID0gc2hpcC5zaGlwTmFtZTtcbiAgICAgICAgc2hpcFBvc2l0aW9uLnB1c2goaW5kZXggKyBpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGlyZWN0aW9uID09IFwiVmVydGljYWxcIikge1xuICAgICAgaWYgKHBvczEgKyBzaGlwLmxlbmd0aCA+IDEwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGluZGV4ID0gaW5kZXhGaW5kZXIocG9zMSwgcG9zMik7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBib2FyZFtpbmRleCArIGkgKiAxMF0ubmFtZSA9IHNoaXAuc2hpcE5hbWU7XG4gICAgICAgIHNoaXBQb3NpdGlvbi5wdXNoKGluZGV4ICsgaSAqIDEwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc2hpcHMucHVzaChzaGlwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY2VpdmVBdHRhY2socG9zMSwgcG9zMikge1xuICAgIGxldCBpbmRleCA9IGluZGV4RmluZGVyKHBvczEsIHBvczIpO1xuXG4gICAgaWYgKGJvYXJkW2luZGV4XS5uYW1lICE9IG51bGwpIHtcbiAgICAgIGF0dGFja2VkUG9zaXRpb24ucHVzaChpbmRleCk7XG4gICAgICBmaW5kU2hpcChib2FyZFtpbmRleF0ubmFtZSkuaGl0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pc3NlZEF0dGFjay5wdXNoKGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZFNoaXAobmFtZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChzaGlwc1tpXS5zaGlwTmFtZSA9PSBuYW1lKSB7XG4gICAgICAgIHJldHVybiBzaGlwc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0FsbFN1bmsoKSB7XG4gICAgaWYgKHNoaXBQb3NpdGlvbi5sZW5ndGggPT0gYXR0YWNrZWRQb3NpdGlvbi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJvYXJkKCkge1xuICAgIHJldHVybiBib2FyZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE1pc3NlZFBvc2l0aW9ucygpIHtcbiAgICByZXR1cm4gbWlzc2VkQXR0YWNrO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2hpcHNQb3NpdGlvbnMoKSB7XG4gICAgcmV0dXJuIHNoaXBQb3NpdGlvbjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEF0dGFja2VkUG9zaXRpb25zKCkge1xuICAgIHJldHVybiBhdHRhY2tlZFBvc2l0aW9uO1xuICB9XG4gIHJldHVybiB7XG4gICAgY3JlYXRlQm9hcmQsXG4gICAgZ2V0Qm9hcmQsXG4gICAgcGxhY2VTaGlwLFxuICAgIHJlY2VpdmVBdHRhY2ssXG4gICAgaXNBbGxTdW5rLFxuICAgIGdldE1pc3NlZFBvc2l0aW9ucyxcbiAgICBnZXRBdHRhY2tlZFBvc2l0aW9ucyxcbiAgICBnZXRTaGlwc1Bvc2l0aW9ucyxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVCb2FyZDtcbiIsImltcG9ydCBzaGlwIGZyb20gXCIuL3NoaXBcIjtcbmltcG9ydCBnYW1lQm9hcmQgZnJvbSBcIi4vZ2FtZWJvYXJkXCI7XG5pbXBvcnQgcGxheWVyIGZyb20gXCIuL3BsYXllclwiO1xuXG5jb25zdCBnYW1lID0gKGZ1bmN0aW9uICgpIHtcbiAgbGV0IGdhbWVyID0gcGxheWVyKCk7XG4gIGxldCBjb21wdXRlciA9IHBsYXllcigpO1xuXG4gIGdhbWVyLmNyZWF0ZUJvYXJkKCk7XG4gIGNvbXB1dGVyLmNyZWF0ZUJvYXJkKCk7XG5cbiAgbGV0IGdhbWVyQm9hcmQgPSBnYW1lci5nZXRCb2FyZCgpO1xuICBsZXQgY29tcHV0ZXJCb2FyZCA9IGNvbXB1dGVyLmdldEJvYXJkKCk7XG4gIGxldCBnYW1lclNoaXBzID0gZ2FtZXIuZ2V0U2hpcHMoKTtcbiAgbGV0IGNvbXB1dGVyU2hpcHMgPSBjb21wdXRlci5nZXRTaGlwcygpO1xuXG4gIGZ1bmN0aW9uIGdldEdhbWVyQm9hcmQoKSB7XG4gICAgcmV0dXJuIGdhbWVyQm9hcmQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb21wdXRlckJvYXJkKCkge1xuICAgIHJldHVybiBjb21wdXRlckJvYXJkO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0R2FtZXJTaGlwcygpIHtcbiAgICByZXR1cm4gZ2FtZXJTaGlwcztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldENvbXB1dGVyU2hpcHMoKSB7XG4gICAgcmV0dXJuIGNvbXB1dGVyU2hpcHM7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdhbWVyLFxuICAgIGNvbXB1dGVyLFxuICAgIGdldEdhbWVyQm9hcmQsXG4gICAgZ2V0Q29tcHV0ZXJCb2FyZCxcbiAgICBnZXRHYW1lclNoaXBzLFxuICAgIGdldENvbXB1dGVyU2hpcHMsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBnYW1lO1xuIiwiaW1wb3J0IHNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IGdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCBwbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgZ2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5cbmNvbnN0IGRvbSA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IGNhcnJpZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnJpZXItbmFtZVwiKTtcbiAgY29uc3QgYmF0dGxlc2hpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYmF0dGxlc2hpcC1uYW1lXCIpO1xuICBjb25zdCBjcnVpc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jcnVpc2VyLW5hbWVcIik7XG4gIGNvbnN0IHN1Ym1hcmluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWFyaW5lLW5hbWVcIik7XG4gIGNvbnN0IGRlc3Ryb3llciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzdHJveWVyLW5hbWVcIik7XG4gIGNvbnN0IHBsYXllckJvYXJkRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGF5ZXItYm9hcmRcIik7XG4gIGNvbnN0IGNvbXB1dGVyQm9hcmREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbXB1dGVyLWJvYXJkXCIpO1xuICBjb25zdCBkaXJlY3Rpb25CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpcmVjdGlvblwiKTtcblxuICBsZXQgZ2FtZXJCb2FyZCA9IGdhbWUuZ2V0R2FtZXJCb2FyZCgpO1xuICBsZXQgY29tcHV0ZXJCb2FyZCA9IGdhbWUuZ2V0Q29tcHV0ZXJCb2FyZCgpO1xuICBsZXQgZ2FtZXJTaGlwcyA9IFsuLi5nYW1lLmdldEdhbWVyU2hpcHMoKV07XG4gIGxldCBjb21wdXRlclNoaXBzID0gWy4uLmdhbWUuZ2V0Q29tcHV0ZXJTaGlwcygpXTtcblxuICBmdW5jdGlvbiBoaWRlRGlzcGxheShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Rpc3BsYXkoZWxlbWVudCkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUdhbWVCb2FyZHMoKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lckJvYXJkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoaSk7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoZ2FtZXJCb2FyZFtpXS5jb29yZGluYXRlcyk7XG4gICAgICBncmlkLmNsYXNzTGlzdC5hZGQoXCJncmlkXCIpO1xuICAgICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwicGxheWVyLWJvYXJkXCIpO1xuICAgICAgcGxheWVyQm9hcmREaXYuYXBwZW5kQ2hpbGQoZ3JpZCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcHV0ZXJCb2FyZC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGdyaWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZ3JpZC5jbGFzc0xpc3QuYWRkKGkpO1xuICAgICAgZ3JpZC5jbGFzc0xpc3QuYWRkKGNvbXB1dGVyQm9hcmRbaV0uY29vcmRpbmF0ZXMpO1xuICAgICAgZ3JpZC5jbGFzc0xpc3QuYWRkKFwiZ3JpZFwiKTtcbiAgICAgIGdyaWQuY2xhc3NMaXN0LmFkZChcImNvbXB1dGVyLWJvYXJkXCIpO1xuICAgICAgY29tcHV0ZXJCb2FyZERpdi5hcHBlbmRDaGlsZChncmlkKTtcbiAgICB9XG4gIH1cblxuICBwbGF5ZXJCb2FyZERpdi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGdyaWQpID0+IHtcbiAgICBpZiAoZ3JpZC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGxheWVyLWJvYXJkXCIpKSB7XG4gICAgICBsZXQgY29vcmRpbmF0ZXMgPSBncmlkLnRhcmdldC5jbGFzc0xpc3RbMV0uc3BsaXQoXCIsXCIpO1xuICAgICAgbGV0IHBvczEgPSBwYXJzZUludChjb29yZGluYXRlc1swXSk7XG4gICAgICBsZXQgcG9zMiA9IHBhcnNlSW50KGNvb3JkaW5hdGVzWzFdKTtcbiAgICAgIGlmIChnYW1lclNoaXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IGN1cnJlbnRTaGlwID0gZ2FtZXJTaGlwc1swXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuZ2FtZXIucGxhY2VTaGlwKFxuICAgICAgICAgICAgcG9zMSxcbiAgICAgICAgICAgIHBvczIsXG4gICAgICAgICAgICBjdXJyZW50U2hpcCxcbiAgICAgICAgICAgIGRpcmVjdGlvbkJ1dHRvbi52YWx1ZVxuICAgICAgICAgICkgIT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZ2FtZXJCb2FyZCk7XG4gICAgICAgICAgZ2FtZXJTaGlwcy5zaGlmdCgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGdhbWUuZ2V0R2FtZXJTaGlwcygpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgZGlyZWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaWYgKGRpcmVjdGlvbkJ1dHRvbi52YWx1ZSA9PSBcIkhvcml6b250YWxcIikge1xuICAgICAgZGlyZWN0aW9uQnV0dG9uLnZhbHVlID0gXCJWZXJ0aWNhbFwiO1xuICAgICAgZGlyZWN0aW9uQnV0dG9uLnRleHRDb250ZW50ID0gXCJTZXQgSG9yaXpvbnRhbFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJlY3Rpb25CdXR0b24udmFsdWUgPSBcIkhvcml6b250YWxcIjtcbiAgICAgIGRpcmVjdGlvbkJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2V0IFZlcnRpY2FsXCI7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGhpZGVEaXNwbGF5LFxuICAgIHNob3dEaXNwbGF5LFxuICAgIGNyZWF0ZUdhbWVCb2FyZHMsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBkb207XG4iLCJpbXBvcnQgZG9tIGZyb20gXCIuL2RvbVwiO1xuaW1wb3J0IHNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IGdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCBwbGF5ZXIgZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgZ2FtZSBmcm9tIFwiLi9nYW1lXCI7XG5cbmRvbS5jcmVhdGVHYW1lQm9hcmRzKCk7XG4iXSwibmFtZXMiOlsibGVuZ3RoIiwibmFtZSIsImhpdHMiLCJzdW5rIiwiaGl0IiwiZ2V0SGl0cyIsImlzU3VuayIsInNoaXBOYW1lIiwiYm9hcmQiLCJtaXNzZWRBdHRhY2siLCJhdHRhY2tlZFBvc2l0aW9uIiwic2hpcFBvc2l0aW9uIiwic2hpcHMiLCJpbmRleEZpbmRlciIsInBvczEiLCJwb3MyIiwiY3JlYXRlQm9hcmQiLCJpIiwiaiIsIm5ld0Nvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZXMiLCJjcmVhdGVDb29yZGluYXRlIiwicHVzaCIsImdldEJvYXJkIiwicGxhY2VTaGlwIiwic2hpcCIsImRpcmVjdGlvbiIsImluZGV4IiwicmVjZWl2ZUF0dGFjayIsImZpbmRTaGlwIiwiaXNBbGxTdW5rIiwiZ2V0TWlzc2VkUG9zaXRpb25zIiwiZ2V0QXR0YWNrZWRQb3NpdGlvbnMiLCJnZXRTaGlwc1Bvc2l0aW9ucyIsInNob3RDb29yZGluYXRlcyIsInJhbmRvbUF0dGFjayIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImdldFNoaXBzIiwiZ2V0U2hvdENvb3JkaW5hdGVzIiwiZ2FtZXIiLCJjb21wdXRlciIsImdhbWVyQm9hcmQiLCJjb21wdXRlckJvYXJkIiwiZ2FtZXJTaGlwcyIsImNvbXB1dGVyU2hpcHMiLCJnZXRHYW1lckJvYXJkIiwiZ2V0Q29tcHV0ZXJCb2FyZCIsImdldEdhbWVyU2hpcHMiLCJnZXRDb21wdXRlclNoaXBzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicGxheWVyQm9hcmREaXYiLCJjb21wdXRlckJvYXJkRGl2IiwiZGlyZWN0aW9uQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdyaWQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNwbGl0IiwicGFyc2VJbnQiLCJjdXJyZW50U2hpcCIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsInNoaWZ0IiwidGV4dENvbnRlbnQiLCJoaWRlRGlzcGxheSIsImVsZW1lbnQiLCJyZW1vdmUiLCJhZGQiLCJzaG93RGlzcGxheSIsImNyZWF0ZUdhbWVCb2FyZHMiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiXSwic291cmNlUm9vdCI6IiJ9